<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Reset Your Password</title>
    <link rel="icon" type="image/png" href="favicon-16x16 (1).png"> <style>
        /* Inlined CSS for reset-password.html (can be simpler) */
        body { font-family: Arial, sans-serif; background-color: #f4f4f4; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; }
        .container { background-color: #fff; padding: 30px; border-radius: 8px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); text-align: center; max-width: 400px; width: 90%; }
        input[type="password"] { width: calc(100% - 22px); padding: 10px; margin-bottom: 15px; border: 1px solid #ddd; border-radius: 4px; }
        .btn { background-color: #007bff; color: white; padding: 10px 20px; border: none; border-radius: 5px; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn:hover { background-color: #0056b3; }
        #reset-status { margin-top: 20px; font-weight: bold; color: green; }
        .error-message { color: red; }
    </style>
</head>
<body>
    <div class="container">
        <h2>Set New Password</h2>
        <p id="reset-status"></p>
        <form id="new-password-form">
            <p><label for="new-password">New Password:</label><br>
            <input type="password" id="new-password" required minlength="6"></p>
            <p><button type="submit" class="btn">Set New Password</button></p>
        </form>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        document.addEventListener('DOMContentLoaded', async function() {
            // IMPORTANT: REPLACE THESE WITH YOUR ACTUAL SUPABASE PROJECT URL AND PUBLIC (ANON) KEY
            const SUPABASE_URL = 'https://ycrmkofqhtlkexfbpljy.supabase.co';
            const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Inljcm1rb2ZxaHRsa2V4ZmJwbGp5Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NDgzMDQyMTgsImV4cCI6MjA2Mzg4MDIxOH0.RttjxZ_VSoZbeFWmI6nD0mSQb40ozvoPT6u7eRd9Tpo';
            const supabase = Supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

            const newPasswordForm = document.getElementById('new-password-form');
            const newPasswordInput = document.getElementById('new-password');
            const resetStatus = document.getElementById('reset-status');
            const submitButton = newPasswordForm.querySelector('button');


            // Check if a session (from the reset link) exists
            const { data: { session }, error: sessionError } = await supabase.auth.getSession();

            if (sessionError || !session) {
                resetStatus.className = 'error-message';
                resetStatus.textContent = 'Invalid or expired password reset link. Please try resetting your password again.';
                newPasswordForm.style.display = 'none'; // Hide the form if no valid session
                console.error('Session error on reset page:', sessionError);
                return;
            }

            newPasswordForm.addEventListener('submit', async function(event) {
                event.preventDefault();
                const newPassword = newPasswordInput.value;

                if (newPassword.length < 6) {
                    resetStatus.className = 'error-message';
                    resetStatus.textContent = 'Password must be at least 6 characters long.';
                    return;
                }

                resetStatus.textContent = 'Setting new password...';
                submitButton.disabled = true;

                const { error } = await supabase.auth.updateUser({
                    password: newPassword
                });

                if (error) {
                    resetStatus.className = 'error-message';
                    resetStatus.textContent = `Error setting new password: ${error.message}`;
                    console.error('Update user error:', error);
                } else {
                    resetStatus.className = ''; // Clear error styling
                    resetStatus.textContent = 'Password updated successfully! You can now log in.';
                    newPasswordForm.reset();
                    // Optional: Redirect to login page after a few seconds
                    setTimeout(() => {
                        window.location.href = '/index.html#contact'; // Redirect to home page or a specific login page
                    }, 3000);
                }
                submitButton.disabled = false;
            });
        });
    </script>
</body>
</html>
feat: Inline CSS and JS into reset-password.html with Supabase keys
